/*******************************************************
 Copyright (C) 2026 George Ef (george.a.ef@gmail.com)

 This program is free software; you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation; either version 2 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 ********************************************************/

#include "StockData.h"

StockData::StockData()
{
    m_id             = -1;
    m_account_id     = -1;
    m_num_shares     = 0.0;
    m_purchase_price = 0.0;
    m_current_price  = 0.0;
    m_purchase_value = 0.0;
    m_commission     = 0.0;

}

// Convert StockData to StockRow
StockRow StockData::to_row() const
{
    StockRow row;

    row.STOCKID       = m_id;
    row.HELDAT        = m_account_id;
    row.PURCHASEDATE  = m_purchase_date;
    row.STOCKNAME     = m_name;
    row.SYMBOL        = m_symbol;
    row.NUMSHARES     = m_num_shares;
    row.PURCHASEPRICE = m_purchase_price;
    row.NOTES         = m_notes;
    row.CURRENTPRICE  = m_current_price;
    row.VALUE         = m_purchase_value;
    row.COMMISSION    = m_commission;

    return row;
}

// Convert StockRow to StockData
StockData& StockData::from_row(const StockRow& row)
{
    m_id             = row.STOCKID;       // int64
    m_account_id     = row.HELDAT;        // int64
    m_name           = row.STOCKNAME;     // wxString
    m_symbol         = row.SYMBOL;        // wxString
    m_num_shares     = row.NUMSHARES;     // double
    m_purchase_date  = row.PURCHASEDATE;  // wxString
    m_purchase_price = row.PURCHASEPRICE; // double
    m_current_price  = row.CURRENTPRICE;  // double
    m_purchase_value = row.VALUE;         // double
    m_commission     = row.COMMISSION;    // double
    m_notes          = row.NOTES;         // wxString

    return *this;
}

bool StockData::equals(const StockData* other) const
{
    if ( m_id != other->m_id) return false;
    if ( m_account_id != other->m_account_id) return false;
    if (!m_name.IsSameAs(other->m_name)) return false;
    if (!m_symbol.IsSameAs(other->m_symbol)) return false;
    if ( m_num_shares != other->m_num_shares) return false;
    if (!m_purchase_date.IsSameAs(other->m_purchase_date)) return false;
    if ( m_purchase_price != other->m_purchase_price) return false;
    if ( m_current_price != other->m_current_price) return false;
    if ( m_purchase_value != other->m_purchase_value) return false;
    if ( m_commission != other->m_commission) return false;
    if (!m_notes.IsSameAs(other->m_notes)) return false;

    return true;
}
